
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Book Manager</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="bootstrap.min.css">

    <style>
        .form-signin {
            width: 100%;
            max-width: 330px;
            padding: 15px;
            margin: 0 auto;
        }
    </style>

</head>

<body>


<div class="text-center" id="login">
    <form class="form-signin" id="form-signin">
        <img class="mb-4" src="bootstrap-solid.svg" alt="" width="72" height="72">
        <h1 class="h3 mb-3 font-weight-normal">Please sign in</h1>
        <label for="inputEmail" class="sr-only">Email address</label>
        <input type="email" id="inputEmail" class="form-control" placeholder="Email address" autofocus="">
        <label for="inputPassword" class="sr-only">Password</label>
        <input type="password" id="inputPassword" class="form-control" placeholder="Password">
        <div class="checkbox mb-3">
            <label>
                <input type="checkbox" value="remember-me"> Remember me
            </label>
        </div>
        <button class="btn btn-lg btn-primary btn-block" type="submit">Sign in</button>
        <p class="mt-5 mb-3 text-muted">Â© 2022</p>
    </form>
</div>
<div id="register">register</div>

<div id="auth">

    <header>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="#">Book Manager</a>

            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active" id="all_books">
                        <a class="nav-link" href="#">All Books <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="nav-item" id="favourite">
                        <a class="nav-link" href="#">Favourite Books</a>
                    </li>
                    <li class="nav-item" id="create">
                        <a class="nav-link" href="#">Create New Book</a>
                    </li>
                </ul>

            </div>
        </nav>
    </header>

    <!-- Begin page content -->
    <main role="main" class="container" style="margin-top: 100px !important;">

        <div id="all_books_div">No Books to show</div>
        <div id="favourite_div">favourite</div>
        <div id="create_div">
            <input >
        </div>

    </main>

</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

</body>
<script>

    const base_url = "http://localhost:3000/books/"

    //on load show login page
    function on_load(){
        document.getElementById("register").style.display = "none";
        document.getElementById("auth").style.display = "none";
        document.getElementById("login").style.display = "block";
    }

    on_load();

    function login(){

        document.getElementById("register").style.display = "none";
        document.getElementById("login").style.display = "none";
        document.getElementById("auth").style.display = "block";
        show_all_books_page()
    }

    function load_all_books(){
        fetch(base_url)
            .then(res=>res.json())
            .then(res=> {
                let html = "";
                for (let i=0;i<res.length;i++){
                    html += "<li>"+res[i].name+"</li>"
                }

                document.getElementById("all_books_div").innerHTML = html

            })
            .catch(e=>console.error(e))
    }

    function load_favourite_books(){
        fetch(base_url)
            .then(res=>res.json())
            .then(res=> {
                let html = "";
                for (let i=0;i<res.length;i++){
                    if (res[i].is_favourite) {
                        html += "<li>" + res[i].name + "</li>"
                    }
                }

                document.getElementById("favourite_div").innerHTML = html

            })
            .catch(e=>console.error(e))
    }



    function show_all_books_page(){
        document.getElementById("all_books_div").style.display = "block";
        document.getElementById("favourite_div").style.display = "none";
        document.getElementById("create_div").style.display = "none";
        load_all_books();
    }

    function show_favourite_books(){

        document.getElementById("all_books_div").style.display = "none";
        document.getElementById("favourite_div").style.display = "block";
        document.getElementById("create_div").style.display = "none";
        load_favourite_books();
    }

    function show_create(){

        document.getElementById("all_books_div").style.display = "none";
        document.getElementById("favourite_div").style.display = "none";
        document.getElementById("create_div").style.display = "block";
    }

    document.getElementById("form-signin").addEventListener("click",function (e){

        e.preventDefault()
        login()
    })

    document.getElementById("all_books").addEventListener("click",function (e){

        show_all_books_page()
    })

    document.getElementById("favourite").addEventListener("click",function (e){

        show_favourite_books()
    })
    document.getElementById("create").addEventListener("click",function (e){

        show_create()
    })







</script>

</html>
